{"ast":null,"code":"import { ref, onMounted } from \"vue\";\nimport RequestsRow from \"./RequestsRow.vue\";\nexport default {\n  __name: 'RequestsTable',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const requests = ref([]);\n    const page = ref(1);\n    const limit = ref(10);\n    const selectedRequest = ref(null);\n    const fetchRequests = async (page, limit) => {\n      try {\n        const response = await fetch(`/requests?page=${page}&limit=${limit}`);\n        if (!response.ok) {\n          throw new Error(`An error occurred: ${response.statusText}`);\n        }\n        requests.value = await response.json();\n      } catch (error) {\n        console.error(\"Failed to fetch requests:\", error);\n      }\n    };\n    const setSelectedRequest = request => {\n      selectedRequest.value = request;\n    };\n    const approve = () => {\n      if (selectedRequest.value) {\n        selectedRequest.value.status = \"approved\";\n      }\n    };\n    const reject = () => {\n      if (selectedRequest.value) {\n        selectedRequest.value.status = \"declined\";\n      }\n    };\n    const nextPage = () => {\n      page.value += 1;\n      fetchRequests(page.value, limit.value);\n    };\n    const prevPage = () => {\n      if (page.value > 1) {\n        page.value -= 1;\n        fetchRequests(page.value, limit.value);\n      }\n    };\n    onMounted(() => {\n      fetchRequests(page.value, limit.value);\n    });\n    const __returned__ = {\n      requests,\n      page,\n      limit,\n      selectedRequest,\n      fetchRequests,\n      setSelectedRequest,\n      approve,\n      reject,\n      nextPage,\n      prevPage,\n      ref,\n      onMounted,\n      RequestsRow\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","RequestsRow","requests","page","limit","selectedRequest","fetchRequests","response","fetch","ok","Error","statusText","value","json","error","console","setSelectedRequest","request","approve","status","reject","nextPage","prevPage"],"sources":["/Users/p.pletmintsev/VSCodeProjects/kamgov.lk2/front/src/components/RequestsTable.vue"],"sourcesContent":["<template>\n  <div class=\"table-wrapper\">\n    <table>\n      <thead>\n        <tr>\n          <th>Название объявления</th>\n          <th>Статус</th>\n          <th>Трансляция</th>\n          <th>Бюджет</th>\n          <th>Потрачено</th>\n          <th>Результат</th>\n        </tr>\n      </thead>\n      <tbody>\n        <RequestsRow\n          v-for=\"(request, index) in requests\"\n          :key=\"request.id\"\n          :request=\"request\"\n          :selectedRequest=\"selectedRequest\"\n          :setSelectedRequest=\"setSelectedRequest\"\n          :approve=\"approve\"\n          :reject=\"reject\"\n        />\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from \"vue\";\nimport RequestsRow from \"./RequestsRow.vue\";\n\nconst requests = ref([]);\nconst page = ref(1);\nconst limit = ref(10);\nconst selectedRequest = ref(null);\n\nconst fetchRequests = async (page, limit) => {\n  try {\n    const response = await fetch(`/requests?page=${page}&limit=${limit}`);\n    if (!response.ok) {\n      throw new Error(`An error occurred: ${response.statusText}`);\n    }\n    requests.value = await response.json();\n  } catch (error) {\n    console.error(\"Failed to fetch requests:\", error);\n  }\n};\n\nconst setSelectedRequest = (request) => {\n  selectedRequest.value = request;\n};\n\nconst approve = () => {\n  if (selectedRequest.value) {\n    selectedRequest.value.status = \"approved\";\n  }\n};\n\nconst reject = () => {\n  if (selectedRequest.value) {\n    selectedRequest.value.status = \"declined\";\n  }\n};\n\nconst nextPage = () => {\n  page.value += 1;\n  fetchRequests(page.value, limit.value);\n};\n\nconst prevPage = () => {\n  if (page.value > 1) {\n    page.value -= 1;\n    fetchRequests(page.value, limit.value);\n  }\n};\n\nonMounted(() => {\n  fetchRequests(page.value, limit.value);\n});\n</script>\n\n<style>\n.table-wrapper {\n  border: 1px solid #e1e3e6;\n  border-radius: 16px;\n  overflow: hidden;\n}\n\ntable {\n  width: 100%;\n  border-collapse: collapse;\n  border: none;\n}\n\nth,\ntd {\n  padding: 8px;\n}\n\ntd {\n  border-top: 1px solid #ddd;\n}\n\nth {\n  background: #f5f5f5;\n  border-color: #e1e3e6;\n}\n\ntr:hover {\n  cursor: pointer;\n  background: #f9f9f9;\n}\n\ntr.m--active {\n  cursor: default;\n  background: #f9f9f9;\n  & td {\n    border-bottom-color: transparent;\n  }\n}\nbutton {\n  padding: 10px 20px;\n  margin-right: 10px;\n  border: none;\n  cursor: pointer;\n  font-size: 16px;\n}\nbutton:hover {\n  background-color: #f0f0f0;\n}\nbutton:nth-child(1) {\n  background-color: #28a745;\n  color: white;\n}\nbutton:nth-child(2) {\n  background-color: #dc3545;\n  color: white;\n}\n</style>\n"],"mappings":"AA6BA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAOC,WAAW,MAAM,mBAAmB;;;;;;;IAE3C,MAAMC,QAAQ,GAAGH,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMI,IAAI,GAAGJ,GAAG,CAAC,CAAC,CAAC;IACnB,MAAMK,KAAK,GAAGL,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMM,eAAe,GAAGN,GAAG,CAAC,IAAI,CAAC;IAEjC,MAAMO,aAAa,GAAG,MAAAA,CAAOH,IAAI,EAAEC,KAAK,KAAK;MAC3C,IAAI;QACF,MAAMG,QAAQ,GAAG,MAAMC,KAAK,CAAC,kBAAkBL,IAAI,UAAUC,KAAK,EAAE,CAAC;QACrE,IAAI,CAACG,QAAQ,CAACE,EAAE,EAAE;UAChB,MAAM,IAAIC,KAAK,CAAC,sBAAsBH,QAAQ,CAACI,UAAU,EAAE,CAAC;QAC9D;QACAT,QAAQ,CAACU,KAAK,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;MACxC,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACnD;IACF,CAAC;IAED,MAAME,kBAAkB,GAAIC,OAAO,IAAK;MACtCZ,eAAe,CAACO,KAAK,GAAGK,OAAO;IACjC,CAAC;IAED,MAAMC,OAAO,GAAGA,CAAA,KAAM;MACpB,IAAIb,eAAe,CAACO,KAAK,EAAE;QACzBP,eAAe,CAACO,KAAK,CAACO,MAAM,GAAG,UAAU;MAC3C;IACF,CAAC;IAED,MAAMC,MAAM,GAAGA,CAAA,KAAM;MACnB,IAAIf,eAAe,CAACO,KAAK,EAAE;QACzBP,eAAe,CAACO,KAAK,CAACO,MAAM,GAAG,UAAU;MAC3C;IACF,CAAC;IAED,MAAME,QAAQ,GAAGA,CAAA,KAAM;MACrBlB,IAAI,CAACS,KAAK,IAAI,CAAC;MACfN,aAAa,CAACH,IAAI,CAACS,KAAK,EAAER,KAAK,CAACQ,KAAK,CAAC;IACxC,CAAC;IAED,MAAMU,QAAQ,GAAGA,CAAA,KAAM;MACrB,IAAInB,IAAI,CAACS,KAAK,GAAG,CAAC,EAAE;QAClBT,IAAI,CAACS,KAAK,IAAI,CAAC;QACfN,aAAa,CAACH,IAAI,CAACS,KAAK,EAAER,KAAK,CAACQ,KAAK,CAAC;MACxC;IACF,CAAC;IAEDZ,SAAS,CAAC,MAAM;MACdM,aAAa,CAACH,IAAI,CAACS,KAAK,EAAER,KAAK,CAACQ,KAAK,CAAC;IACxC,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}