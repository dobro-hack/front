{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"table-wrapper\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"Название объявления\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Статус\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Трансляция\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Бюджет\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Потрачено\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Результат\")])], -1 /* HOISTED */);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"table\", null, [_hoisted_2, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.requests, (request, index) => {\n    return _openBlock(), _createBlock($setup[\"RequestsRow\"], {\n      key: request.id,\n      request: request,\n      selectedRequest: $setup.selectedRequest,\n      setSelectedRequest: $setup.setSelectedRequest,\n      approve: $setup.approve,\n      reject: $setup.reject\n    }, null, 8 /* PROPS */, [\"request\", \"selectedRequest\"]);\n  }), 128 /* KEYED_FRAGMENT */))])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_Fragment","_renderList","$setup","requests","request","index","_createBlock","key","id","selectedRequest","setSelectedRequest","approve","reject"],"sources":["/Users/p.pletmintsev/VSCodeProjects/kamgov.lk2/front/src/components/RequestsTable.vue"],"sourcesContent":["<template>\n  <div class=\"table-wrapper\">\n    <table>\n      <thead>\n        <tr>\n          <th>Название объявления</th>\n          <th>Статус</th>\n          <th>Трансляция</th>\n          <th>Бюджет</th>\n          <th>Потрачено</th>\n          <th>Результат</th>\n        </tr>\n      </thead>\n      <tbody>\n        <RequestsRow\n          v-for=\"(request, index) in requests\"\n          :key=\"request.id\"\n          :request=\"request\"\n          :selectedRequest=\"selectedRequest\"\n          :setSelectedRequest=\"setSelectedRequest\"\n          :approve=\"approve\"\n          :reject=\"reject\"\n        />\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from \"vue\";\nimport RequestsRow from \"./RequestsRow.vue\";\n\nconst requests = ref([]);\nconst page = ref(1);\nconst limit = ref(10);\nconst selectedRequest = ref(null);\n\nconst fetchRequests = async (page, limit) => {\n  try {\n    const response = await fetch(`/requests?page=${page}&limit=${limit}`);\n    if (!response.ok) {\n      throw new Error(`An error occurred: ${response.statusText}`);\n    }\n    requests.value = await response.json();\n  } catch (error) {\n    console.error(\"Failed to fetch requests:\", error);\n  }\n};\n\nconst setSelectedRequest = (request) => {\n  selectedRequest.value = request;\n};\n\nconst approve = () => {\n  if (selectedRequest.value) {\n    selectedRequest.value.status = \"approved\";\n  }\n};\n\nconst reject = () => {\n  if (selectedRequest.value) {\n    selectedRequest.value.status = \"declined\";\n  }\n};\n\nconst nextPage = () => {\n  page.value += 1;\n  fetchRequests(page.value, limit.value);\n};\n\nconst prevPage = () => {\n  if (page.value > 1) {\n    page.value -= 1;\n    fetchRequests(page.value, limit.value);\n  }\n};\n\nonMounted(() => {\n  fetchRequests(page.value, limit.value);\n});\n</script>\n\n<style>\n.table-wrapper {\n  border: 1px solid #e1e3e6;\n  border-radius: 16px;\n  overflow: hidden;\n}\n\ntable {\n  width: 100%;\n  border-collapse: collapse;\n  border: none;\n}\n\nth,\ntd {\n  padding: 8px;\n}\n\ntd {\n  border-top: 1px solid #ddd;\n}\n\nth {\n  background: #f5f5f5;\n  border-color: #e1e3e6;\n}\n\ntr:hover {\n  cursor: pointer;\n  background: #f9f9f9;\n}\n\ntr.m--active {\n  cursor: default;\n  background: #f9f9f9;\n  & td {\n    border-bottom-color: transparent;\n  }\n}\nbutton {\n  padding: 10px 20px;\n  margin-right: 10px;\n  border: none;\n  cursor: pointer;\n  font-size: 16px;\n}\nbutton:hover {\n  background-color: #f0f0f0;\n}\nbutton:nth-child(1) {\n  background-color: #28a745;\n  color: white;\n}\nbutton:nth-child(2) {\n  background-color: #dc3545;\n  color: white;\n}\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAe;gCAEtBC,mBAAA,CASQ,gB,aARNA,mBAAA,CAOK,a,aANHA,mBAAA,CAA4B,YAAxB,qBAAmB,G,aACvBA,mBAAA,CAAe,YAAX,QAAM,G,aACVA,mBAAA,CAAmB,YAAf,YAAU,G,aACdA,mBAAA,CAAe,YAAX,QAAM,G,aACVA,mBAAA,CAAkB,YAAd,WAAS,G,aACbA,mBAAA,CAAkB,YAAd,WAAS,E;;uBATrBC,mBAAA,CAwBM,OAxBNC,UAwBM,GAvBJF,mBAAA,CAsBQ,gBArBNG,UASQ,EACRH,mBAAA,CAUQ,iB,kBATNC,mBAAA,CAQEG,SAAA,QAtBVC,WAAA,CAeqCC,MAAA,CAAAC,QAAQ,EAf7C,CAekBC,OAAO,EAAEC,KAAK;yBADxBC,YAAA,CAQEJ,MAAA;MANCK,GAAG,EAAEH,OAAO,CAACI,EAAE;MACfJ,OAAO,EAAEA,OAAO;MAChBK,eAAe,EAAEP,MAAA,CAAAO,eAAe;MAChCC,kBAAkB,EAAER,MAAA,CAAAQ,kBAAkB;MACtCC,OAAO,EAAET,MAAA,CAAAS,OAAO;MAChBC,MAAM,EAAEV,MAAA,CAAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}