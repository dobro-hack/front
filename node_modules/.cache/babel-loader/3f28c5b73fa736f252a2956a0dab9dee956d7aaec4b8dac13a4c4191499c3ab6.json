{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-32bbe56a\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"pagination-controls\"\n};\nconst _hoisted_2 = [\"disabled\"];\nconst _hoisted_3 = {\n  class: \"table-wrapper\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"Название объявления\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Статус\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Трансляция\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Бюджет\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Потрачено\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Результат\")])], -1 /* HOISTED */));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"button\", {\n    onClick: $setup.prevPage,\n    disabled: $setup.page === 1\n  }, \"Previous\", 8 /* PROPS */, _hoisted_2), _createElementVNode(\"span\", null, \"Page \" + _toDisplayString($setup.page), 1 /* TEXT */), _createElementVNode(\"button\", {\n    onClick: $setup.nextPage\n  }, \"Next\")]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"table\", null, [_hoisted_4, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.requests, (request, index) => {\n    return _openBlock(), _createBlock($setup[\"RequestsRow\"], {\n      key: request.request_id,\n      request: request,\n      selectedRequest: $setup.selectedRequest,\n      setSelectedRequest: $setup.setSelectedRequest,\n      approve: $setup.approve,\n      reject: $setup.reject\n    }, null, 8 /* PROPS */, [\"request\", \"selectedRequest\"]);\n  }), 128 /* KEYED_FRAGMENT */))])])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","onClick","$setup","prevPage","disabled","page","_hoisted_2","_toDisplayString","nextPage","_hoisted_3","_hoisted_4","_Fragment","_renderList","requests","request","index","_createBlock","key","request_id","selectedRequest","setSelectedRequest","approve","reject"],"sources":["/Users/p.pletmintsev/VSCodeProjects/kamgov.lk2/front/src/components/RequestsTable.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"pagination-controls\">\n      <button @click=\"prevPage\" :disabled=\"page === 1\">Previous</button>\n      <span>Page {{ page }}</span>\n      <button @click=\"nextPage\">Next</button>\n    </div>\n    <div class=\"table-wrapper\">\n      <table>\n        <thead>\n          <tr>\n            <th>Название объявления</th>\n            <th>Статус</th>\n            <th>Трансляция</th>\n            <th>Бюджет</th>\n            <th>Потрачено</th>\n            <th>Результат</th>\n          </tr>\n        </thead>\n        <tbody>\n          <RequestsRow\n            v-for=\"(request, index) in requests\"\n            :key=\"request.request_id\"\n            :request=\"request\"\n            :selectedRequest=\"selectedRequest\"\n            :setSelectedRequest=\"setSelectedRequest\"\n            :approve=\"approve\"\n            :reject=\"reject\"\n          />\n        </tbody>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from \"vue\";\nimport RequestsRow from \"./RequestsRow.vue\";\nimport { fetchRequests } from \"@/api/requests\";\n\nconst requests = ref([]);\nconst page = ref(1);\nconst limit = ref(10);\nconst selectedRequest = ref(null);\n\nconst loadRequests = async (page, limit) => {\n  try {\n    const data = await fetchRequests(page, limit);\n    requests.value = data;\n  } catch (error) {\n    console.error(\"Failed to load requests:\", error);\n  }\n};\n\nconst setSelectedRequest = (request) => {\n  selectedRequest.value = request;\n};\n\nconst approve = () => {\n  if (selectedRequest.value) {\n    selectedRequest.value.status = \"approved\";\n  }\n};\n\nconst reject = () => {\n  if (selectedRequest.value) {\n    selectedRequest.value.status = \"declined\";\n  }\n};\n\nconst nextPage = () => {\n  page.value += 1;\n  loadRequests(page.value, limit.value);\n};\n\nconst prevPage = () => {\n  if (page.value > 1) {\n    page.value -= 1;\n    loadRequests(page.value, limit.value);\n  }\n};\n\nonMounted(() => {\n  loadRequests(page.value, limit.value);\n});\n</script>\n\n<style scoped>\n.table-wrapper {\n  border: 1px solid #e1e3e6;\n  border-radius: 16px;\n  overflow: hidden;\n}\n\ntable {\n  width: 100%;\n  border-collapse: collapse;\n  border: none;\n}\n\nth,\ntd {\n  padding: 8px;\n}\n\ntd {\n  border-top: 1px solid #ddd;\n}\n\nth {\n  background: #f5f5f5;\n  border-color: #e1e3e6;\n}\n\ntr:hover {\n  cursor: pointer;\n  background: #f9f9f9;\n}\n\ntr.m--active {\n  cursor: default;\n  background: #f9f9f9;\n}\n\nbutton {\n  padding: 10px 20px;\n  border: none;\n  background-color: #007bff;\n  color: white;\n  cursor: pointer;\n}\n\nbutton:disabled {\n  background-color: #ccc;\n  cursor: not-allowed;\n}\n\nbutton:hover:enabled {\n  background-color: #0056b3;\n}\n</style>\n"],"mappings":";;;EAESA,KAAK,EAAC;AAAqB;mBAFpC;;EAOSA,KAAK,EAAC;AAAe;gEAEtBC,mBAAA,CASQ,gB,aARNA,mBAAA,CAOK,a,aANHA,mBAAA,CAA4B,YAAxB,qBAAmB,G,aACvBA,mBAAA,CAAe,YAAX,QAAM,G,aACVA,mBAAA,CAAmB,YAAf,YAAU,G,aACdA,mBAAA,CAAe,YAAX,QAAM,G,aACVA,mBAAA,CAAkB,YAAd,WAAS,G,aACbA,mBAAA,CAAkB,YAAd,WAAS,E;;uBAfvBC,mBAAA,CA+BM,cA9BJD,mBAAA,CAIM,OAJNE,UAIM,GAHJF,mBAAA,CAAkE;IAAzDG,OAAK,EAAEC,MAAA,CAAAC,QAAQ;IAAGC,QAAQ,EAAEF,MAAA,CAAAG,IAAI;KAAQ,UAAQ,iBAH/DC,UAAA,GAIMR,mBAAA,CAA4B,cAAtB,OAAK,GAAAS,gBAAA,CAAGL,MAAA,CAAAG,IAAI,kBAClBP,mBAAA,CAAuC;IAA9BG,OAAK,EAAEC,MAAA,CAAAM;EAAQ,GAAE,MAAI,E,GAEhCV,mBAAA,CAwBM,OAxBNW,UAwBM,GAvBJX,mBAAA,CAsBQ,gBArBNY,UASQ,EACRZ,mBAAA,CAUQ,iB,kBATNC,mBAAA,CAQEY,SAAA,QA5BZC,WAAA,CAqBuCV,MAAA,CAAAW,QAAQ,EArB/C,CAqBoBC,OAAO,EAAEC,KAAK;yBADxBC,YAAA,CAQEd,MAAA;MANCe,GAAG,EAAEH,OAAO,CAACI,UAAU;MACvBJ,OAAO,EAAEA,OAAO;MAChBK,eAAe,EAAEjB,MAAA,CAAAiB,eAAe;MAChCC,kBAAkB,EAAElB,MAAA,CAAAkB,kBAAkB;MACtCC,OAAO,EAAEnB,MAAA,CAAAmB,OAAO;MAChBC,MAAM,EAAEpB,MAAA,CAAAoB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}